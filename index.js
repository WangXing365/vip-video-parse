// ==UserScript==
// @name         [净]全网VIP视频免费破解去广告-自用修改版
// @version      1.0.0
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAGZ0lEQVRoge2Yf2hdZxnHP897zrk3N8lN0tp0SVgKpeqkyc1W4yyK1qQisqkwhfwx6B8dm1rFTRQExb/MH5sgKtvaQZHaf2R/bAwEQSwbvUnYWhMNa5MUVhgMxvqDtbLEpMm958f7+Mc9aZrcc08u8UaG5AsXzvM+P77P+zzvec/7XtjBDnawgx18XBEWC4+FxcJj28kh2xVY33wgH4SZKwCe6/fJl64ubgeP2Y6gAGGUGRXoFegNo8zodvFsSwf884VBMUwCTjwUqeVw5ujsdKO5Gt4BfWXEEYfTrCUP4IjDaX1lxKnlt1U0fAJB59WnUQZloRv37Udxn+rFvHUfKINB59WnG83X0AnoeH+viI4COO8dgiAHiz7mrAeAiI7qeH9vIzndRgYLVV4A8gCcnIVFn7muW3gtTRyomORjm283irOuDuiFvt3hWGFkUzvkdcAC2Cd8yGfwWpro/k521cTGNqkIxwojeqFvdz251bUL+ecHDovRv7jG7ZMjb99KtR0r/ETgd0k6hZ9mhmZ/n+avE4c6QxteUSvfyhydmdwst7o6YBz9JNAZ2vDUZrbeV2afByYSVBOxLhUxR2fMuXlu9RiplU/FjyObLSURLNY8W6Ww5lmRyvKqhTj2yAbOVNQ3AdaqoehL+kb/fWn2buT+vZ6xdRzFwT0KJ+/Kogfqya2uCYjoPdWQPaEnp1Md3FJUNbaLIM0lFP8lYO8aJ/V1wB/rf0bPDbSkm8m69SjK+2nWZStVHSqv+F2pDHBz3YCmT0DPDbT4Y/3PGDBhmNWp8kTfwRT7bwIfrAqOCZ9LC24cORI/VH6ACTmS5rMh5gcxZyLKE30Hw6xOgQmNp+ZlYL+xZsovFo4nOXhDsxdR8/jdAdeUawVXRQQ9AWBy7ZhcOwBiOKGasm376q8FMY97Q7MXE82KhePGmilgv6fmZSPDl+YVXgNaRDhbK767cucfq8+hb56qZRdOFEZBPo/jYXJtmFwbGBeUw+F44Vc1/Rzvu0lcGxHn2KLwmgxfmheAoNg/hEgRwA0yHfK16YWNjqXzAw84Rt+JRSvoaYue9VqbrjBfzofGeQhjfww8AuB0dCNeDgANSkQL10EB+Cuiz7sBl+nILgbLYb9RfUJVv0e8qURWPtN0dObqxhy0+FBHKNFHFUGHveG5MQPgDs2NC7wLEGT8Y0kzd43+HABjAIwiPxDMVLjk3wlduYmxfwMeQRyc9jh5G4GNEK8Jp60bxAF4FJVzoSs3wyX/jlg7qaonABPHXuPagIDoGIDAu+7Q3DjEhzkRNHoz86qG/i9E+a1fHPA8vD/h+lEYMIDDz1T5BiI47T2AoqVF1C+hUQDGII6LZFoxudZKohoRLVQ2FqejC8nkcHffjy0tov4dNArBWsTxEK8JyeUBIZq/hqoeD8YLnUT8xvWYQV03sOExgV8DiJt5VaTSz7svlU4OP2jVn7alfydfOsTgtO1FMs2J6nWtDpaxi7crSQJiPEx+D5LJbe5bXiZa+hBs8kdbcm3WyTQPyqHXL62bAIC9/PUbRLbLlhbQwAc0rmxzZTcxDtgIuzJfqZqTqbygKBqFaFBCy0toUEom95qQbGvs6wKC2giiMhqUMM0dle5FEXZlAQ2W4yII4mXiHMxN8+C57tWY6+4DGgZnTFP+l042ucoalLCLtyrLhqr3fFNoUKo5OahU3+T3Il4W07obqD5R29LimXvldR3Q4lCTbbEfSrYlv1ahEMIytrSE+sv1ZWoN5lof5nYvnJxBH/aInnwfvOoTRhIk04zJtoKXRe7tsL+8ZAJ/r3zx4sqq7boOyPBYKRgvnGL5o8RdoF6Y6wcxNz5dEZYCpBjgyD6i779Xl7/6y0SJxZIXnaGZlXtHqg5zkeEPrO7YW4S5ta+aejL1LFcPNBJT9aFN/LRH01+9IY7bFc1fB8DZ1QMK9cruk/fDUiXhua7KBc5rbuLAc8tbiufs6oEoumE++0bPxlyTj9Ma/Xm9vFGfLuvDXlXI9kLrluOhIHZDTjESO6AXvpAL/aVrwK4k/abwHZw/7kP+GfBO57/oKOT5xMhtxEu9kKVhwW3N9MjnpqtejJqnw3Cs/5QiP9wqYyMhyil3ePZHSbqaNzJrzJlauv810nKp+ceWt2f/i//dXtRI6Atw+ctJmtp3YtUtL9jGQz42pdzBDnawg/8z/AfnG5yzUmUMlAAAAABJRU5ErkJggg==
// @include      *://*.youku.com/v_*
// @include      *://*.iqiyi.com/v_*
// @include      *://*.iqiyi.com/w_*
// @include      *://*.iqiyi.com/a_*
// @include      *://*.le.com/ptv/vplay/*
// @include      *://v.qq.com/x/cover/*
// @include      *://v.qq.com/x/page/*
// @include      *://*.tudou.com/listplay/*
// @include      *://*.tudou.com/albumplay/*
// @include      *://*.tudou.com/programs/view/*
// @include      *://*.mgtv.com/b/*
// @include      *://film.sohu.com/album/*
// @include      *://tv.sohu.com/v/*
// @include      *://*.bilibili.com/anime/*
// @include      *://*.bilibili.com/bangumi/play/*
// @include      *://*.baofeng.com/play/*.
// @include      *://vip.pptv.com/show/*
// @include      *://v.pptv.com/show/*
// @include      *music.163.com*
// @include      *://y.qq.com*
// @connect      pcw-api.iqiyi.com
// @grant        GM_xmlhttpRequest
// @grant        GM_getResourceText
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_openInTab
// @grant        GM_download
// @grant        GM_info
// @require      https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js
// @run-at       document-idle
// @charset		 UTF-8
// ==/UserScript==

(function() {
	'use strict';
    var $ = $ || window.$;
    const window_url = window.location.href;
    const window_host = window.location.host;
	/*
	*	VIP解析部分代码借鉴以下脚本：
	*	脚本地址：https://greasyfork.org/zh-CN/scripts/418804
	*	作者：爱画画的猫，代码已经授权！
	*/
	//VIP视频解析
	const coolhiiVIPVideo={};
	coolhiiVIPVideo.eleId = Math.ceil(Math.random()*100000000);
	coolhiiVIPVideo.defaultSourceArray=[
		{"name":"纯净/B站","category":"1","url":"https://z1.m1907.cn/?jx="},
		{"name":"高速接口","category":"1","url":"https://jsap.attakids.com/?url="},
		{"name":"综合/B站1","category":"1","url":"https://vip.parwix.com:4433/player/?url="},
		{"name":"OK解析","category":"1","url":"https://okjx.cc/?url="},
		{"name":"乐多资源","category":"1","url":"https://api.leduotv.com/wp-api/ifr.php?isDp=1&vid="},
		{"name":"虾米","category":"1","url":"https://jx.xmflv.com/?url="},
		{"name":"全民","category":"1","url":"https://jx.quanmingjiexi.com/?url="},
		{"name":"七哥","category":"1","url":"https://jx.mmkv.cn/tv.php?url="},
		{"name":"冰豆","category":"1","url":"https://api.qianqi.net/vip/?url="},
		{"name":"诺诺","category":"1","url":"https://www.ckmov.com/?url="},
		{"name":"迪奥","category":"1","url":"https://123.1dior.cn/?url="},
		{"name":"CK","category":"1","url":"https://www.ckplayer.vip/jiexi/?url="},
		{"name":"LE","category":"1","url":"https://lecurl.cn/?url="},
		{"name":"ckmov","category":"1","url":"https://www.ckmov.vip/api.php?url="},
		{"name":"ccyjjd","category":"1","url":"https://ckmov.ccyjjd.com/ckmov/?url="},
		{"name":"RDHK","category":"1","url":"https://jx.rdhk.net/?v="},
		{"name":"爱豆","category":"1","url":"https://jx.aidouer.net/?url="},
		{"name":"H8","category":"1","url":"https://www.h8jx.com/jiexi.php?url="},
		{"name":"BL","category":"1","url":"https://vip.bljiex.com/?v="},
		{"name":"解析la","category":"1","url":"https://api.jiexi.la/?url="},
		{"name":"MUTV","category":"1","url":"https://jiexi.janan.net/jiexi/?url="},
		{"name":"MAO","category":"1","url":"https://www.mtosz.com/m3u8.php?url="},
		{"name":"老板","category":"1","url":"https://vip.laobandq.com/jiexi.php?url="},
		{"name":"盘古","category":"1","url":"https://www.pangujiexi.cc/jiexi.php?url="},
		{"name":"盖世","category":"1","url":"https://www.gai4.com/?url="},
		{"name":"小蒋","category":"1","url":"https://www.kpezp.cn/jlexi.php?url="},
		{"name":"YiTV","category":"1","url":"https://jiexi.us/?url="},
		{"name":"星空","category":"1","url":"http://60jx.com/?url="},
		{"name":"0523","category":"1","url":"https://go.yh0523.cn/y.cy?url="},
		{"name":"17云","category":"1","url":"https://www.1717yun.com/jx/ty.php?url="},
		{"name":"4K","category":"1","url":"https://jx.4kdv.com/?url="},
		{"name":"云析","category":"1","url":"https://jx.yparse.com/index.php?url="},
		{"name":"8090","category":"1","url":"https://www.8090g.cn/?url="},
		{"name":"江湖","category":"1","url":"https://api.jhdyw.vip/?url="},
		{"name":"诺讯","category":"1","url":"https://www.nxflv.com/?url="},
		{"name":"PM","category":"1","url":"https://www.playm3u8.cn/jiexi.php?url="},
		{"name":"奇米","category":"1","url":"https://qimihe.com/?url="},
		{"name":"思云","category":"1","url":"https://jx.ap2p.cn/?url="},
		{"name":"听乐","category":"1","url":"https://jx.dj6u.com/?url="},
		{"name":"aijx","category":"1","url":"https://jiexi.t7g.cn/?url="},
		{"name":"夜幕","category":"1","url":"https://www.yemu.xyz/?url="},
		{"name":"52","category":"1","url":"https://vip.52jiexi.top/?url="},
		{"name":"黑米","category":"1","url":"https://www.myxin.top/jx/api/?url="},
		{"name":"豪华啦","category":"1","url":"https://api.lhh.la/vip/?url="},
		{"name":"凉城","category":"1","url":"https://jx.mw0.cc/?url="},
		{"name":"33t","category":"1","url":"https://www.33tn.cn/?url="},
		{"name":"180","category":"1","url":"https://jx.000180.top/jx/?url="},
		{"name":"无名","category":"1","url":"https://www.administratorw.com/video.php?url="},
		{"name":"黑云","category":"1","url":"https://jiexi.380k.com/?url="},
		{"name":"九八","category":"1","url":"https://jx.youyitv.com/?url="},
	];
	coolhiiVIPVideo.iframePlayerNodes = [
		{ url:"v.qq.com", node:"#mod_player"},
		{ url:"www.iqiyi.com", node:"#flashbox"},
		{ url:"v.youku.com", node:"#player"},
		{ url:"w.mgtv.com", node:"#mgtv-player-wrap"},
		{ url:"www.mgtv.com", node:"#mgtv-player-wrap"},
		{ url:"tv.sohu.com", node:"#player"},
		{ url:"film.sohu.com", node:"#playerWrap"},
		{ url:"www.le.com", node:"#le_playbox"},
		{ url:"video.tudou.com", node:".td-playbox"},
		{ url:"v.pptv.com", node:"#pptv_playpage_box"},
		{ url:"vip.pptv.com", node:".w-video"},
		{ url:"www.wasu.cn", node:"#flashContent"},
		{ url:"www.acfun.cn", node:"#ACPlayer"},
		{ url:"vip.1905.com", node:"#player"},
		{url:"play.tudou.com",node:"#player"},
		{url:"www.bilibili.com/video",node:"#bilibiliPlayer"},
		{url:"www.bilibili.com/bangumi",node:"#player_module"},
	];
	coolhiiVIPVideo.judgeVipWebsite=function(){
		var isVip = false;
		var host = window.location.host;
		var vipWebsites = ["iqiyi.com","v.qq.com","youku.com", "le.com","tudou.com","mgtv.com","sohu.com",
			"acfun.cn","bilibili.com","baofeng.com","pptv.com"];
   		for(var b=0; b<vipWebsites.length; b++){
	   		if(host.indexOf(vipWebsites[b]) != -1){
	   			isVip = true;
	   			break;
	   		}
	   	}
   		return isVip;
	};
	coolhiiVIPVideo.addStyle=function(){
		var themeColor = "#FF5C31";
		var innnerCss = "";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+"{position:fixed; top:160px; left:0px; width:25px; z-index:99999999999999;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .vip_analysis_interface_box{position:relative;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .plugin_item{cursor:pointer;text-align:center;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .jump_analysis_666666 >img{width:170%; display: inline-block; vertical-align: middle;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .setting_analysis_666666{height:25px;line-height:25px;margin-top:5px;background-color:"+themeColor+";border-radius:4px;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .setting_analysis_666666 >img{width:80%; display: inline-block; vertical-align: middle;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box_outer{display:none;position:absolute;top:-60px;left:25px;padding:5px;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box{width:300px;height:350px;background-color:rgba(241,241,241,0.8);overflow-y:auto;border-radius:4px;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box::-webkit-scrollbar{width:5px; height:1px;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box::-webkit-scrollbar-thumb{border-radius: 4px;box-shadow:inset 0 0 5px rgba(0, 0, 0, 0.2); background:#A8A8A8;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box::-webkit-scrollbar-track{border-radius: 4px;box-shadow:inset 0 0 5px rgba(0, 0, 0, 0.2); background:#F1F1F1;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box >span{border-radius:3px;border-top:3px solid "+themeColor+"; border-bottom:3px solid "+themeColor+";display:inline-block;width:calc(25% - 6px);width:-moz-calc(25% - 6px);width: -webkit-calc(25% - 6px);height:20px;line-height:20px;background-color:"+themeColor+";color:#FFF;cursor:pointer;margin:3px;text-align:center;overflow:hidden;white-space: nowrap;text-overflow: ellipsis;-o-text-overflow:ellipsis;font-size:12px!important;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box >span:hover{border-top:3px solid #FFF; border-bottom:3px solid #FFF;}";
		innnerCss += "#plugin_coolhii_analysis_vip_"+this.eleId+" .select_interface_box >span.hover-mark{border-top:3px solid #FFF; border-bottom:3px solid #FFF;}";
		$("body").prepend("<style>"+innnerCss+"</style>");
	};
	coolhiiVIPVideo.generateHtml=function(){
		var interfaceHtml = "";
		for(var i=0; i<this.defaultSourceArray.length; i++){
			var obj = this.defaultSourceArray[i];
			interfaceHtml += "<span data-url='"+obj.url+"'>"+obj.name+"</span>";
		}
		var vipBase64Image = "data:image/png;base64,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";
		var html=
			`
			<div id='plugin_coolhii_analysis_vip_`+this.eleId+`'>
				<div class="vip_analysis_interface_box">
					<div class='plugin_item jump_analysis_666666'><img src='`+vipBase64Image+`'></div>
					<div class="select_interface_box_outer">
						<div class='select_interface_box'>
							`+interfaceHtml+`
						</div>;
					</div>
				</div>
			</div>
			`;
		$("body").append(html);
	};
	coolhiiVIPVideo.operation=function(){
		$("body").on("click", "#plugin_coolhii_analysis_vip_"+coolhiiVIPVideo.eleId+" .setting_analysis_666666", function(){
			alert("1");
		});
		$("body").on("click", "#plugin_coolhii_analysis_vip_"+coolhiiVIPVideo.eleId+" .select_interface_box>span", function(){
			var node = "";
			var iframePlayerNodes = coolhiiVIPVideo.iframePlayerNodes;
			for(var m in iframePlayerNodes) {
				var playUrl = window.location.href;
				if(playUrl.indexOf(iframePlayerNodes[m].url)!= -1){
					node = iframePlayerNodes[m].node;
				}
			}
			//标记点击过的接口
			$("#plugin_coolhii_analysis_vip_"+coolhiiVIPVideo.eleId+" .select_interface_box>span").removeClass("hover-mark");
			$(this).addClass("hover-mark");
			$("#play-iframe-outer-7788OP-99999900-99999900OOO").remove();
			var playHtml = "<div id='play-iframe-outer-7788OP-99999900OOO' style='width:100%;height:100%;'><iframe allowtransparency=true frameborder='0' scrolling='no' allowfullscreen=true allowtransparency=true name='jx_play' style='height:100%;width:100%' id='play-iframe-6677i9999999666666'></iframe></div>";
			$(node).html(playHtml);
			var iframeSrc= $(this).attr("data-url")+playUrl;
			$("#play-iframe-6677i9999999666666").attr("src", iframeSrc);
		});
		var $vipMovieBox = $("#plugin_coolhii_analysis_vip_"+coolhiiVIPVideo.eleId+" .vip_analysis_interface_box");
		var $playSourceBox = $("#plugin_coolhii_analysis_vip_"+coolhiiVIPVideo.eleId+" .select_interface_box_outer");
		$vipMovieBox.on("mouseover", () => {
			$playSourceBox.show();
		});
		$vipMovieBox.on("mouseout", () => {
			$playSourceBox.hide();
		});
	};
	coolhiiVIPVideo.paramsSelectedInit=function(){
		var episodeList=[];
		var episodeObj = {
			"websiteTitle":"",
			"episodeList":episodeList,
			"originVideoUrl":""
		};
		GM_setValue("episodeObj",episodeObj);
		return episodeObj;
	};
    coolhiiVIPVideo.getSelected=function(){};
	coolhiiVIPVideo.movieWebsitesPlayersSelected=function(){};
	//视频广告过滤相关代码借鉴自其它脚本，该部分代码版权归原作者所有！在此感谢
	//借鉴脚本作者：sign
	//地址：https://greasyfork.org/zh-CN/scripts/406849
	//修改：优化了该段代码的逻辑，使可读性更高
	coolhiiVIPVideo.advertisingAcceleration=function(){
		var currentHost = window.location.host;
		if(currentHost==="www.iqiyi.com"){
			try{
				unsafeWindow.rate = 0;
				unsafeWindow.Date.now = () => {
					return new unsafeWindow.Date().getTime() + (unsafeWindow.rate += 1000);
				}
				setInterval(() => {
					unsafeWindow.rate = 0;
				}, 600000);
			}catch(e){}
			try{
				setInterval(() => {
					if (document.getElementsByClassName("cupid-public-time")[0] != null) {
						$(".skippable-after").css("display", "block");
						document.getElementsByClassName("skippable-after")[0].click();
					}
					$(".qy-player-vippay-popup").css("display", "none");
					$(".black-screen").css("display", "none");
				}, 500);
			}catch(e){}
		}
		else if(currentHost==="v.qq.com"){
			try{
				setInterval(() => { //视频广告加速
					$(".txp_ad").find("txpdiv").find("video")[0].currentTime = 1000;
					$(".txp_ad").find("txpdiv").find("video")[1].currentTime = 1000;
				}, 1000)
			}catch(e){}
			try{
				setInterval(() => {
					var txp_btn_volume = $(".txp_btn_volume");
					if (txp_btn_volume.attr("data-status") === "mute") {
						$(".txp_popup_volume").css("display", "block");
						txp_btn_volume.click();
						$(".txp_popup_volume").css("display", "none");
					}
					$(".mod_vip_popup").css("display", "none");
					$(".tvip_layer").css("display", "none");
					$("#mask_layer").css("display", "none");
				}, 500);
			}catch(e){}
		}
		else if(currentHost==="v.youku.com"){
			try{
				window.onload = function () {
					if (!document.querySelectorAll('video')[0]) {
						setInterval(() => {
							document.querySelectorAll('video')[1].playbackRate = 16;
						}, 100)
					}
				}
			}catch(e){}
			try{
				setInterval(() => {
					var H5 = $(".h5-ext-layer").find("div")
					if(H5.length != 0){
						$(".h5-ext-layer div").remove();
						var control_btn_play = $(".control-left-grid .control-play-icon");
						if (control_btn_play.attr("data-tip") === "播放") {
							$(".h5player-dashboard").css("display", "block");
							control_btn_play.click();
							$(".h5player-dashboard").css("display", "none");
						}
					}
					$(".information-tips").css("display", "none");
				}, 500);
			}catch(e){}
		}
		else if(currentHost==="tv.sohu.com"){
			try{
				setInterval(() => {
					$(".x-video-adv").css("display", "none");
					$(".x-player-mask").css("display", "none");
					$("#player_vipTips").css("display", "none");
				}, 500);
			}catch(e){}
		}
	};
	//借鉴脚本作者：lanhaha , 版权归原作者所有
	//地址：https://greasyfork.org/zh-CN/scripts/370634
	//修改：优化了该段代码的逻辑，使可读性更高
	coolhiiVIPVideo.pageEventExtend = function(){
		var window_url = window.location.href;
		if(window_url.indexOf('v.qq.com/x/cover') != -1){
			$("body").on('mouseover', '.item a', function(e) {
				let $playerItem = $(this), href = $playerItem.attr('href') || $playerItem.data("href");
				$playerItem.off('click.chrome');
				$playerItem.on('click.chrome', function() {
					window.location.href = href
				}).attr('data-href', href).css({
					cursor: 'pointer'
				}).removeAttr('href')
			})
		}else if(window_url.indexOf('iqiyi.com/v_') != -1){
			function remove(selector) {
				if (!document.querySelectorAll) {
					return;
				}
				var nodes = document.querySelectorAll(selector);
				if (nodes) {
					for (var i = 0; i < nodes.length; i++) {
						if (nodes[i] && nodes[i].parentNode) {
							nodes[i].parentNode.removeChild(nodes[i]);
						}
					}
				}
			};
			function removeObj(targetSelector, rootSelector = 'body', wait) {
				const rootElement = document.querySelector(rootSelector);
				const targetElement = rootElement.querySelector(targetSelector);
				if (targetElement) {
					return Promise.resolve(targetElement)
				}
				return new Promise((resolve, reject) => {
					const callback = function(matationList, observer) {
						const targetElement = rootElement.querySelector(targetSelector);
						if (targetElement) {
							resolve(targetElement);
							observer.disconnect()
						}
					};
					const observer = new MutationObserver(callback);
					observer.observe(rootElement, {
						subtree: true,
						childList: true
					});
					if (wait !== undefined) {
						setTimeout(() => {
							observer.disconnect()
						}, wait)
					}
				})
			};
			async function removeAll(targetSelector, rootSelector, now = false) {
				if (now) {
					const parent = rootSelector ? document.querySelector(rootSelector) : document;
					if (parent) {
						const target = parent.querySelector(targetSelector);
						if (target) {
							target.remove();
							return true
						}
					}
					return false
				}
				const target = await removeObj(targetSelector, rootSelector);
				target.remove()
			};
			setTimeout(()=>{
				remove('div#scrollTip,.qy-glide,#qy-glide,[class^="qy-glide"],[id^="qy-glide"],svg[display="none"][aria-hidden="true"],div[class*="player-side-ear"],div[class^="player-mnb"][data-asyn-pb]');
				removeAll('div[style*="visibility"][style*="visible"]:not([class]):not([id]):not([style*="fixed"])', undefined, false);
			},1000);
			$('div[style*="visibility"][style*="visible"]:not([class]):not([id]):not([style*="fixed"])').hide();
			$("body").on('mouseover', 'ul li [href*="/v_"][href*=".html"]:not([href*="=http"]):not([href*="?http"]):not([href*="#http"])', function(e) {
				let $playerItem = $(this), href = $playerItem.attr('href') || $playerItem.data("href");
				$playerItem.off('click.chrome');
				$playerItem.on('click.chrome', function() {
					window.location.href = href
				}).attr('data-href', href).css({
					cursor: 'pointer'
				}).removeAttr('href')
			});
		}
	};
	coolhiiVIPVideo.start=function(){
    	if(this.judgeVipWebsite() && window.top==window.self){
			const self = this;
			setTimeout(function(){
				self.addStyle();
				self.generateHtml();
				self.operation();
				self.pageEventExtend();
				self.getSelected();
			},400);
    	}
		this.advertisingAcceleration(); //广告过滤
    	this.movieWebsitesPlayersSelected(); //选集
    };
	coolhiiVIPVideo.start();
      }
)();